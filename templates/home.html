{% extends "pmain.html" %}
{% block body %}
{% load static %}
<div class="container fixedCon">
    <div class="row">
        <div class="col-md-6 offset-md-3">
            <div class="quizBody">
                <h1>Welcome to DataFlair Quiz</h1>
        
                <div id="displaytimer"><b>Timer: 0 seconds</b></div>
                <div id="countdown"></div>
                <form method="post" action="" name="cartCheckout" id="cartCheckout">
                    {% csrf_token %} {% for q in questions%}
                    <div class="form-group">
                        <label for="question">{{q.question}}</label>
                    </div>
                    <div class="form-check">
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="{{q.question}}" id="{{q.op1}}" value="{{q.op1}}" />
                            <label class="form-check-label" for="{{q.op1}}">
                                {{q.op1}}
                            </label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="{{q.question}}" id="{{q.op2}}" value="{{q.op2}}" />
                            <label class="form-check-label" for="{{q.op2}}">
                                {{q.op2}}
                            </label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="{{q.question}}" id="{{q.op3}}" value="{{q.op3}}" />
                            <label class="form-check-label" for="{{q.op3}}">
                                {{q.op3}}
                            </label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="{{q.question}}" id="{{q.op4}}" value="{{q.op4}}" />
                            <label class="form-check-label" for="{{q.op4}}">
                                {{q.op4}}
                            </label>
                        </div>
                        <br />
                    </div>
                    {% endfor %}
                    <input id="timer" type="hidden" name="timer" value="" />
                    <br />
                    <button type="submit" class="btn btn-primary">Submit</button>
                </form>
            </div>
        </div>
    </div>
</div>

    {% block script %}
        <script>
 
            // console.log('hello world')
            const timer=document.getElementById('displaytimer')
            console.log(timer.textContent)
            const inputtag = document.getElementById('timer')
 
            t=0
            setInterval(()=>{
                t+=1
                timer.innerHTML ="<b>Timer: " +t+" seconds</b>"
                inputtag.value = t
            },1000)


            // window.onload = function () {
            //     window.setTimeout(document.cartCheckout.submit(), 5000);
            // };


            window.onload=function(){ 
                window.setTimeout(function() { document.cartCheckout.submit(); }, 60000);
            };

            var timeleft = 60;
            var downloadTimer = setInterval(function(){
            if(timeleft <= 0){
                clearInterval(downloadTimer);
                document.getElementById("countdown").innerHTML = "Finished";
            } else {
                document.getElementById("countdown").innerHTML = timeleft + " seconds remaining";
            }
            timeleft -= 1;
            }, 1000);
        </script>
    {% endblock script %}
{% endblock body %}
